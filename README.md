
<br>
CREATE TABLE PUBLISHER<br>
(NAME VARCHAR (20) PRIMARY KEY, <br>
ADDRESS VARCHAR (20),<br>
PHONE INTEGER(20));<br>
<br>

CREATE TABLE BOOK<br>
(BOOK_ID INT (4) PRIMARY KEY,<br>
TITLE VARCHAR (20),<br>
PUB_YEAR VARCHAR (20),<br>
PUBLISHER_NAME VARCHAR (20),<br>
FOREIGN KEY (PUBLISHER_NAME) REFERENCES PUBLISHER (NAME) ON DELETE CASCADE);<br>
CREATE TABLE BOOK_AUTHORS<br>
(BOOK_ID INTEGER,<br>
AUTHOR_NAME VARCHAR (20),<br>
PRIMARY KEY (BOOK_ID, AUTHOR_NAME),<br>
FOREIGN KEY (BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE);<br>
<br>
CREATE TABLE LIBRARY_BRANCH<br>
(BRANCH_ID INTEGER PRIMARY KEY,<br>
BRANCH_NAME VARCHAR (20),<br>
ADDRESS VARCHAR (30));<br>
<br>
CREATE TABLE BOOK_COPIES<br>
(BOOK_ID INTEGER,<br>
BRANCH_ID INTEGER,<br>
NO_OF_COPIES INTEGER,<br>
PRIMARY KEY (BOOK_ID, BRANCH_ID),<br>
FOREIGN KEY (BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE,<br>
FOREIGN KEY (BRANCH_ID) REFERENCES LIBRARY_BRANCH (BRANCH_ID) ON DELETE CASCADE);<br>
<br>
CREATE TABLE CARD<br>
(CARD_NO INTEGER PRIMARY KEY);<br>
<br>
CREATE TABLE BOOK_LENDING<br>
(BOOK_ID INTEGER,<br>
BRANCH_ID INTEGER,<br>
CARD_NO INTEGER NOT NULL,<br>
DATE_OUT DATE,<br>
DUE_DATE DATE,<br>
PRIMARY KEY (BOOK_ID, BRANCH_ID, CARD_NO),<br>
FOREIGN KEY (BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE,<br>
FOREIGN KEY (BRANCH_ID) REFERENCES LIBRARY_BRANCH (BRANCH_ID) ON DELETE CASCADE);<br>
<br>





INSERT INTO PUBLISHER VALUES ('MCGRAW-HILL', 'BANGALORE', 9989076587);<br>
INSERT INTO PUBLISHER VALUES ('PEARSON', 'NEWDELHI', 988907656);<br>
INSERT INTO PUBLISHER VALUES ('RANDOM HOUSE', 'HYDERABAD', 745567934);<br>
INSERT INTO PUBLISHER VALUES ('HACHETTE LIVRE', 'CHENNAI', 897086234);<br>
INSERT INTO PUBLISHER VALUES ('GRUPO PLANETA', 'BANGALORE', 775612023);<br>
<br>
INSERT INTO BOOK VALUES (1,'DBMS','JAN-2017', 'MCGRAW-HILL');<br>
INSERT INTO BOOK VALUES (2,'ADBMS','JUN-2016', 'MCGRAW-HILL');<br>
INSERT INTO BOOK VALUES (3,'CN','SEP-2016', 'PEARSON');<br>
INSERT INTO BOOK VALUES (4,'CG','SEP-2015', 'GRUPO PLANETA');<br>
INSERT INTO BOOK VALUES (5,'OS','MAY-2016', 'PEARSON');<br>
<br>
INSERT INTO BOOK_AUTHORS VALUES (1, 'NAVATHE');<br>
INSERT INTO BOOK_AUTHORS VALUES (2, 'NAVATHE');<br>
INSERT INTO BOOK_AUTHORS VALUES (3, 'TANENBAUM');<br>
INSERT INTO BOOK_AUTHORS VALUES (4, 'EDWARD ANGEL');<br>
INSERT INTO BOOK_AUTHORS VALUES (5, 'GALVIN');<br>
<br>
INSERT INTO LIBRARY_BRANCH VALUES (10,'RR NAGAR','BANGALORE');<br>
INSERT INTO LIBRARY_BRANCH VALUES (11,'RNSIT','BANGALORE');<br>
INSERT INTO LIBRARY_BRANCH VALUES (12,'RAJAJI NAGAR', 'BANGALORE');<br>
INSERT INTO LIBRARY_BRANCH VALUES (13,'NITTE','MANGALORE');<br>
INSERT INTO LIBRARY_BRANCH VALUES (14,'MANIPAL','UDUPI');<br>
<br>
INSERT INTO BOOK_COPIES VALUES (1, 10, 10);<br>
INSERT INTO BOOK_COPIES VALUES (1, 11, 5);<br>
INSERT INTO BOOK_COPIES VALUES (2, 12, 2);<br>
INSERT INTO BOOK_COPIES VALUES (2, 13, 5);<br>
INSERT INTO BOOK_COPIES VALUES (3, 14, 7);<br>
INSERT INTO BOOK_COPIES VALUES (5, 10, 1);<br>
INSERT INTO BOOK_COPIES VALUES (4, 11, 3);<br>
<br>
INSERT INTO CARD VALUES (100);<br>
INSERT INTO CARD VALUES (101);<br>
INSERT INTO CARD VALUES (102);<br>
INSERT INTO CARD VALUES (103);<br>
INSERT INTO CARD VALUES (104);<br>
<br>
INSERT INTO BOOK_LENDING VALUES (1, 10, 101, '2017-01-01', '2017-06-22'); <br>
INSERT INTO BOOK_LENDING VALUES (3, 14, 101, '2017-01-11', '2017-03-11'); <br>
INSERT INTO BOOK_LENDING VALUES (2, 13, 101, '2017-02-21', '2017-05-16'); <br>
INSERT INTO BOOK_LENDING VALUES (4, 11, 101, '2017-03-15', '2017-07-11'); <br>
INSERT INTO BOOK_LENDING VALUES (1, 11, 104, '2017-04-12', '2017-05-12');<br>





1. Retrieve details of all books in the library â€“ id, title, name of publisher, authors, 
number of copies in each branch, etc. 
<br>
SELECT B.BOOK_ID, B.TITLE, B.PUBLISHER_NAME, A.AUTHOR_NAME, C.NO_OF_COPIES, L.BRANCH_ID<br>
FROM BOOK B, BOOK_AUTHORS A, BOOK_COPIES C, LIBRARY_BRANCH L<br>
WHERE B.BOOK_ID=A.BOOK_ID AND B.BOOK_ID=C.BOOK_ID AND L.BRANCH_ID=C.BRANCH_ID;<br>
<br>
2. Get the particulars of borrowers who have borrowed more than 3 books, but from 
Jan 2017 to Jun 2017. 
<br>
Select CARD_NO from book_lending  where DATE_OUT between '01-JAN-17' and '01-    JUL-17' group by(CARD_NO)  having count(CARD_NO)>3 ;<br>
<br>
3. Delete a book in BOOK table. Update the contents of other tables to reflect this data 
Manipulation operation. 
<br>
DELETE FROM BOOK WHERE BOOK_ID=3;<br>
SELECT * FROM BOOK;<br>
<br>
4. Partition the BOOK table based on year of publication. Demonstrate its working with a simple query. <br>
CREATE VIEW YEAR AS SELECT PUB_YEAR FROM BOOK;<br>
SELECT * FROM YEAR;<br>
<br>
5. Create a view of all books and its number of copies that are currently available in the Library. <br>
CREATE VIEW V_BOOKS AS SELECT B.BOOK_ID, B.TITLE, C.NO_OF_COPIES<br>
FROM BOOK B, BOOK_COPIES C WHERE B.BOOK_ID=C.BOOK_ID;<br>
SELECT * FROM V_BOOKS;<br>


